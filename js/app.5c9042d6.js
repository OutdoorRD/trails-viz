(function(e){function t(t){for(var r,i,n=t[0],l=t[1],c=t[2],u=0,m=[];u<n.length;u++)i=n[u],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&m.push(o[i][0]),o[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);d&&d(t);while(m.length)m.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,n=1;n<a.length;n++){var l=a[n];0!==o[l]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=a[0]))}return e}var r={},o={app:0},s=[];function i(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=r,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(a,r,function(t){return e[t]}.bind(null,r));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=t,n=n.slice();for(var c=0;c<n.length;c++)t(n[c]);var d=l;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0138":function(e,t,a){"use strict";var r=a("ebee"),o=a.n(r);o.a},"0dca":function(e,t,a){"use strict";var r=a("f8ba"),o=a.n(r);o.a},"0f85":function(e,t,a){},"1b00":function(e,t,a){"use strict";var r=a("8273"),o=a.n(r);o.a},"1e0f":function(e,t,a){},"38d3":function(e,t,a){},"4f6a":function(e,t,a){"use strict";var r=a("1e0f"),o=a.n(r);o.a},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var r=a("2b0e"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-container",{attrs:{fluid:"",id:"app"}},[a("top-bar",{staticClass:"top-bar"}),a("router-view"),a("div",[a("b-modal",{ref:"unauthorizedModal",attrs:{id:"unauthorizedModal",title:"Unauthorized",centered:"","ok-only":"","header-bg-variant":"secondary","header-text-variant":"light","ok-variant":"danger"}},[a("p",[e._v("Your are not authorized to access this project!")])])],1)],1)},s=[],i=a("768b"),n=(a("ac6a"),a("ffc1"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"info",sticky:""}},[a("b-navbar-brand",{attrs:{to:"/"}},[e._v("TrailTrends")]),a("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),a("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[a("b-navbar-nav",[a("b-nav-text",[e._v("Mapping outdoor recreation on public lands")])],1),a("b-navbar-nav",{staticClass:"ml-auto"},[a("b-nav-form",{on:{submit:e.doNothing}},[a("b-form-input",{directives:[{name:"show",rawName:"v-show",value:this.$store.getters.getSelectedProjectCode,expression:"this.$store.getters.getSelectedProjectCode"}],staticClass:"form-input",attrs:{size:"sm",list:"project-sites-list",placeholder:"Search Trail"},on:{keyup:e.autoCompleteSite,change:e.emitSiteNameEvent},model:{value:e.siteSearchText,callback:function(t){e.siteSearchText=t},expression:"siteSearchText"}}),a("b-form-datalist",{attrs:{id:"project-sites-list",options:e.filteredSites}}),a("b-button",{directives:[{name:"show",rawName:"v-show",value:"anon"===this.$store.getters.getLoggedInUser,expression:"this.$store.getters.getLoggedInUser === 'anon'"}],staticClass:"my-2 my-sm-0",attrs:{size:"sm",variant:"info",to:"/login"}},[e._v("Login")]),a("b-nav-item-dropdown",{directives:[{name:"show",rawName:"v-show",value:"anon"!==this.$store.getters.getLoggedInUser,expression:"this.$store.getters.getLoggedInUser !== 'anon'"}],attrs:{text:this.$store.getters.getLoggedInUser,right:""}},[a("b-dropdown-item",{on:{click:e.gotoUserProfile}},[e._v("Profile")]),"admin"===this.$store.getters.getUserRole?a("b-dropdown-item",{on:{click:e.gotoAdministration}},[e._v("Administration")]):e._e(),a("b-dropdown-item",{on:{click:e.logout}},[e._v("Logout")])],1)],1)],1)],1)],1)}),l=[],c=(a("6762"),a("2fdb"),a("456d"),new r["default"]),d=(a("28a5"),{set:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=new Date;r.setTime(r.getTime()+23*a*60*60*1e3);var o=r.toUTCString();document.cookie=e+"="+t+"; expires="+o+"; path=/"},get:function(e){e+="=";for(var t=decodeURIComponent(document.cookie),a=t.split(";"),r=0;r<a.length;r++){var o=a[r];while(" "===o.charAt(0))o=o.substring(1);if(0===o.indexOf(e))return o.substring(e.length,o.length)}},delete:function(e){this.set(e,"",-1)}}),u={name:"TopBar",data:function(){return{siteSearchText:"",filteredSites:[]}},methods:{autoCompleteSite:function(){var e=this,t=Object.keys(this.$store.getters.getProjectSites);t.includes(this.siteSearchText)||(this.siteSearchText.length>=2?this.filteredSites=t.filter((function(t){return t.toUpperCase().includes(e.siteSearchText.toUpperCase())})):this.filteredSites=[])},emitSiteNameEvent:function(){c.$emit("top-bar:site-selected",this.siteSearchText),this.siteSearchText=""},doNothing:function(e){e.preventDefault()},gotoUserProfile:function(){var e=this.$store.getters.getLoggedInUser;this.$router.push({name:"user",params:{username:e}})},gotoAdministration:function(){this.$router.push({path:"/administration"})},logout:function(){this.$store.dispatch("setLoggedInUser","anon"),d.delete("username"),d.delete("authHeader"),d.delete("userRole"),"/"!==this.$route.path&&this.$router.push({path:"/"})}}},m=u,p=(a("a615"),a("2877")),h=Object(p["a"])(m,n,l,!1,null,"69615b16",null),f=h.exports,g=a("bc3a"),v=a.n(g),b={name:"app",components:{TopBar:f},mounted:function(){var e=this;v.a.interceptors.response.use((function(e){return e}),(function(t){if(403===t.response.status){var a=e.$refs["unauthorizedModal"];a.visible||e.$bvModal.show("unauthorizedModal")}return Promise.reject(t)})),v.a.get(e.$apiEndpoint+"/projects").then((function(t){for(var a=t.data,r={},o=0,s=Object.entries(a);o<s.length;o++){var n=Object(i["a"])(s[o],2),l=n[0],c=n[1];r[c]=l}e.$store.dispatch("setAllProjects",a),e.$store.dispatch("setProjectCodeToName",r)}))}},y=b,S=(a("9012"),Object(p["a"])(y,o,s,!1,null,"5d18871e",null)),_=S.exports,M=a("5f5b"),E=a("b1e0"),w=a("2f62");r["default"].use(w["a"]);var T={allProjects:void 0,projectCodeToName:void 0,selectedProjectName:"",selectedProjectCode:"",selectedProjectDataSources:[],projectSites:{},selectedSite:"",vizMode:"",censusTract:"",comparingSite:"",loggedInUser:"anon",authHeader:"anon",userRole:"anon"},C={setAllProjects:function(e,t){e.allProjects=t},setProjectCodeToName:function(e,t){e.projectCodeToName=t},setSelectedProjectName:function(e,t){e.selectedProjectName=t},setSelectedProjectCode:function(e,t){e.selectedProjectCode=t},setSelectedProjectDataSources:function(e,t){e.selectedProjectDataSources=t},setProjectSites:function(e,t){e.projectSites=t},setSelectedSite:function(e,t){e.selectedSite=t},setVizMode:function(e,t){e.vizMode=t},setCensusTract:function(e,t){e.censusTract=t},setComparingSite:function(e,t){e.comparingSite=t},setLoggedInUser:function(e,t){e.loggedInUser=t},setAuthHeader:function(e,t){e.authHeader=t},setUserRole:function(e,t){e.userRole=t},clearSelectedProjectData:function(e){e.selectedProjectName="",e.selectedProjectCode="",e.selectedProjectDataSources=[],e.projectSites={},e.selectedSite="",e.annualEstimates=[],e.monthlyEstimates=[],e.monthlyVisitation=[],e.weeklyVisitation=[],e.homeLocations=[]}},j={setAllProjects:function(e,t){e.commit("setAllProjects",t)},setProjectCodeToName:function(e,t){e.commit("setProjectCodeToName",t)},setSelectedProjectName:function(e,t){e.commit("setSelectedProjectName",t)},setSelectedProjectCode:function(e,t){e.commit("setSelectedProjectCode",t)},setSelectedProjectDataSources:function(e,t){e.commit("setSelectedProjectDataSources",t)},setProjectSites:function(e,t){e.commit("setProjectSites",t)},setSelectedSite:function(e,t){e.commit("setSelectedSite",t)},setVizMode:function(e,t){e.commit("setVizMode",t)},setCensusTract:function(e,t){e.commit("setCensusTract",t)},setComparingSite:function(e,t){e.commit("setComparingSite",t)},setLoggedInUser:function(e,t){e.commit("setLoggedInUser",t)},setAuthHeader:function(e,t){e.commit("setAuthHeader",t)},setUserRole:function(e,t){e.commit("setUserRole",t)},clearSelectedProjectData:function(e){e.commit("clearSelectedProjectData")}},P={getAllProjects:function(e){return e.allProjects},getProjectCodeToName:function(e){return e.projectCodeToName},getSelectedProjectName:function(e){return e.selectedProjectName},getSelectedProjectCode:function(e){return e.selectedProjectCode},getSelectedProjectDataSources:function(e){return e.selectedProjectDataSources},getProjectSites:function(e){return e.projectSites},getSelectedSite:function(e){return e.selectedSite},getVizMode:function(e){return e.vizMode},getCensusTract:function(e){return e.censusTract},getComparingSite:function(e){return e.comparingSite},getLoggedInUser:function(e){return e.loggedInUser},getAuthHeader:function(e){return e.authHeader},getUserRole:function(e){return e.userRole}},$=new w["a"].Store({state:T,mutations:C,actions:j,getters:P}),I=$,A=a("8c4f"),D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"landing-page"},[a("h1",[e._v("TrailTrends")]),a("h2",[e._v("Data-driven approaches for mapping outdoor recreation on public lands")]),a("p",{staticClass:"form-para"},[a("b-form-input",{attrs:{list:"landing-project-list",placeholder:"Type a project name to get started...",autocomplete:"off"},on:{keyup:e.autoCompleteProject,change:e.routeToDashboard},model:{value:e.projectSearchText,callback:function(t){e.projectSearchText=t},expression:"projectSearchText"}}),a("b-form-datalist",{attrs:{id:"landing-project-list",options:e.filteredProjects}})],1),e._m(0)])},O=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("\n    This dashboard is the result of ongoing collaborations between the\n    "),a("a",{attrs:{href:"https://www.outdoorrd.org",target:"_blank"}},[e._v("Outdoor Recreation & Data Lab")]),e._v("\n    at the University of Washington and many partners. The data and results presented here\n    are continuously updated and improved. If you have any comments, concerns, or corrections,\n    please contact the "),a("a",{attrs:{href:"https://www.outdoorrd.org/people/",target:"_blank"}},[e._v("Outdoor R&D Team")]),e._v(".\n  ")])}],L={name:"LandingPage",data:function(){return{projectSearchText:"",filteredProjects:[]}},mounted:function(){this.$store.dispatch("clearSelectedProjectData")},methods:{autoCompleteProject:function(){var e=this,t=this.$store.getters.getAllProjects,a=Object.keys(t),r=a.map((function(e){return e.toUpperCase()}));r.includes(this.projectSearchText.toUpperCase())||(this.projectSearchText.length>=2?this.filteredProjects=a.filter((function(t){return t.toUpperCase().includes(e.projectSearchText.toUpperCase())})):this.filteredProjects=[])},routeToDashboard:function(){if(this.filteredProjects.includes(this.projectSearchText)){this.$store.dispatch("clearSelectedProjectData");var e=this.$store.getters.getAllProjects[this.projectSearchText];this.projectSearchText="",this.$router.push({name:"dashboard",params:{project:e}})}}}},R=L,x=(a("92df"),Object(p["a"])(R,D,O,!1,null,"34dce261",null)),k=x.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-row",{staticClass:"app-container",attrs:{"no-gutters":""}},[a("b-col",{staticClass:"map-col",attrs:{sm:"6"}},[a("map-div",{ref:"map-div",attrs:{id:"mapDiv"}})],1),a("b-col",{staticClass:"charts-col",attrs:{sm:"6"}},[a("b-row",{attrs:{"no-gutters":""}},[a("b-col",{attrs:{sm:"7"}},[a("b-breadcrumb",{staticClass:"app-breadcrumb",attrs:{items:e.breadcrumbItems}})],1),a("b-col",{attrs:{sm:"5"}},[a("b-button-group",{staticClass:"app-button-group d-flex"},[a("b-button",{staticClass:"app-button",class:{active:"visitation"===e.visibleTabGroup},on:{click:function(t){return e.showSelectedTab("visitation")}}},[e._v("Visitation")]),a("b-button",{directives:[{name:"show",rawName:"v-show",value:"anon"!==this.$store.getters.getLoggedInUser,expression:"this.$store.getters.getLoggedInUser !== 'anon'"}],staticClass:"app-button",class:{active:"visitorCharacteristics"===e.visibleTabGroup},attrs:{disabled:"compare"===this.$store.getters.getVizMode},on:{click:function(t){return e.showSelectedTab("visitorCharacteristics")}}},[e._v("Visitor Characteristics")])],1)],1)],1),a("b-row",{attrs:{"no-gutters":""}},[a("b-col",{attrs:{sm:"12"}},[a("info-viewer",{directives:[{name:"show",rawName:"v-show",value:"project-info"===e.visibleTabGroup,expression:"visibleTabGroup === 'project-info'"}],ref:"project-info"}),a("b-tabs",{directives:[{name:"show",rawName:"v-show",value:"visitation"===e.visibleTabGroup,expression:"visibleTabGroup === 'visitation'"}]},[a("b-tab",{attrs:{title:"Time Series"}},[a("time-series",{ref:"time-series"})],1),a("b-tab",{attrs:{title:"Bar Graph"}},[a("bar-graph",{ref:"bar-graph"})],1),a("b-tab",{attrs:{title:"Methods"}},[a("info-viewer",{ref:"visitation-info"})],1)],1),a("b-tabs",{directives:[{name:"show",rawName:"v-show",value:"visitorCharacteristics"===e.visibleTabGroup,expression:"visibleTabGroup === 'visitorCharacteristics'"}]},[a("b-tab",{attrs:{title:"Home Locations"}},[a("home-locations",{ref:"home-locations"})],1),a("b-tab",{attrs:{title:"Home Locations Map"},on:{"update:active":e.activateHomeLocationsMap}},[a("home-locations-map",{ref:"home-locations-map"})],1),a("b-tab",{attrs:{title:"Demographics"}},[a("demographics-summary",{ref:"demographics-summary"})],1),a("b-tab",{attrs:{title:"Methods"}},[a("info-viewer",{ref:"home-locations-info"})],1)],1)],1)],1)],1)],1)},V=[],U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-alert",{attrs:{show:e.dismissCountDown,dismissible:"",fade:"",variant:"warning"},on:{"dismiss-count-down":e.countDownChanged}},[e._v("\n    Only two sites can be compared at a time!\n  ")]),a("div",{ref:"mapDiv",staticClass:"map-div"})],1)},z=[],B=(a("ac4d"),a("8a81"),a("7f7f"),a("a481"),a("e11e")),G=a.n(B),W={MODELLED:"#1c3dc8",FLICKR:"#d8021f",INSTA:"#9620e5",TWITTER:"#2b7782",WTA:"#0ab652",ALLTRAILS:"#36E0BE",EBIRD:"#f2e718",GRAVY:"#ffa500",REVEAL:"#ffa500",ON_SITE:"#640b00",COMPARE_MODELLED:"#fb9205",COMPARE_FLICKR:"#c9c9c4",COMPARE_INSTA:"#f90dc3",COMPARE_TWITTER:"#12fbf2",COMPARE_WTA:"#ff0000",COMPARE_ALLTRAILS:"#086351",COMPARE_EBIRD:"#e3e84a",COMPARE_GRAVY:"#8a2be2",COMPARE_REVEAL:"#8a2be2",COMPARE_ON_SITE:"#ff6400"},H={TOKEN:"pk.eyJ1Ijoid29vZHNwIiwiYSI6ImNrMjEwY3oycTFlcnEzbXFvbzR4bmNqNjgifQ.pM7-As9W2Ce9xXMv3W-NNg",OUTDOOR_STYLE_TOKEN:"pk.eyJ1Ijoid29vZHNwIiwiYSI6ImNrMjEwYjFyaDB2MHMzaW1mbWM0azVnbTMifQ.LE_loUCO3HjjZfyEayX5Sg",TILES_API:"https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",ATTRIBUTION:'© <a href="https://www.mapbox.com/about/maps/">Mapbox</a> © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'},F={PROJECT:"project",SITE:"site",COMPARE:"compare"},J='<?xml version="1.0" encoding="UTF-8"?><svg version="1.1" id="marker-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">    <path id="path4133" fill="{fillMe}"          d="M7.5,0C5.0676,0,2.2297,1.4865,2.2297,5.2703&#xA;&#x9;C2.2297,7.8378,6.2838,13.5135,7.5,15c1.0811-1.4865,5.2703-7.027,5.2703-9.7297C12.7703,1.4865,9.9324,0,7.5,0z"/></svg>';delete G.a.Icon.Default.prototype._getIconUrl,G.a.Icon.Default.mergeOptions({iconRetinaUrl:a("584d"),iconUrl:a("6397"),shadowUrl:a("e2b9")}),G.a.Icon.Default.prototype.options.iconAnchor=[6,20],G.a.Icon.Default.prototype.options.iconSize=[13,20],G.a.Icon.Default.prototype.options.shadowSize=[20,20];var q=G.a.Icon.extend({options:G.a.Icon.Default.prototype.options}),Y={color:"#ff0000",weight:.5},Z={color:"#ffb801",weight:.8},K={color:"#0000ff",weight:.8},X={color:"#fa00ff",weight:.8},Q={name:"MapDiv",data:function(){return{dismissSecs:5,dismissCountDown:0,visibleLayers:[],lastYearEstimates:void 0}},mounted:function(){var e=this,t=G.a.map(e.$refs["mapDiv"],{center:[40.53,-99.1],zoom:5}),a=G.a.tileLayer(H.TILES_API,{attribution:H.ATTRIBUTION,tileSize:512,maxZoom:18,zoomOffset:-1,id:"woodsp/ckoayirck08k618p28tlyok8j",accessToken:H.OUTDOOR_STYLE_TOKEN}),r=G.a.tileLayer(H.TILES_API,{attribution:H.ATTRIBUTION,tileSize:512,maxZoom:18,zoomOffset:-1,id:"mapbox/satellite-v9",accessToken:H.TOKEN});G.a.control.layers({outdoor:a,satellite:r}).addTo(t),a.addTo(t),e.mapDiv=t,c.$on("top-bar:site-selected",e.selectSite)},beforeDestroy:function(){var e=this;c.$off("top-bar:site-selected",e.selectSite)},methods:{_pointToMarker:function(e,t){var a=this,r=e["properties"]["siteid"],o=a.lastYearEstimates[r],s=function(e){return e>5e4?"#253494":e>1e4?"#2c7fb8":e>5e3?"#41b6c4":e>1e3?"#7fcdbb":e>500?"#c7e9b4":e>=0?"#ffffcc":void 0},i="data:image/svg+xml;base64,"+btoa(J.replace("{fillMe}",s(o))),n=new q({iconUrl:i});return G.a.marker(t,{icon:n})},renderProjectSites:function(){var e=this,t=this,a={};t.visibleLayers.forEach((function(t){return e.mapDiv.removeLayer(t)})),v.a.all([v.a.get(t.$apiEndpoint+"/projects/"+t.$store.getters.getSelectedProjectCode+"/sites/geojson"),v.a.get(t.$apiEndpoint+"/projects/"+t.$store.getters.getSelectedProjectCode+"/lastYearEstimates")]).then(v.a.spread((function(r,o){var s=r.data,n={},l={};o.data.forEach((function(e){return n[e.trail]=e.estimate})),t.lastYearEstimates=n,e.mapDiv.fitBounds(G.a.geoJson(s).getBounds());var d=!0,u=!1,m=void 0;try{for(var p,h=s["features"][Symbol.iterator]();!(d=(p=h.next()).done);d=!0){var f=p.value,g=f["properties"]["siteid"],v=f["properties"]["Trail_name"];g in l||(l[g]={type:"FeatureCollection",name:v,siteid:g},l[g]["features"]=[]),l[g]["features"].push(f)}}catch(b){u=!0,m=b}finally{try{d||null==h.return||h.return()}finally{if(u)throw m}}Object.entries(l).forEach((function(r){var o=Object(i["a"])(r,2),s=o[1],n=G.a.geoJSON(s,{style:Y,pointToLayer:t._pointToMarker}).bindTooltip(s["name"]).on("mouseover",(function(e){e.target===t.$store.getters.getSelectedSite||e.target===t.$store.getters.getComparingSite||e.target.setStyle(Z)})).on("mouseout",(function(e){e.target===t.$store.getters.getSelectedSite||e.target===t.$store.getters.getComparingSite||e.target.setStyle(Y)})).on("click",(function(e){e.originalEvent.ctrlKey?t.$store.getters.getComparingSite&&t.$store.getters.getSelectedSite?t.showAlert():t.$store.getters.getSelectedSite&&(t.$store.dispatch("setComparingSite",e.target),t.$store.getters.getSelectedSite.setStyle(X),t.$store.getters.getComparingSite.setStyle(X),c.$emit("map-div:compare-activated")):t.selectSite(e.target["trailName"])}));n.siteid=s["siteid"],n.trailName=s["name"],t.visibleLayers.push(n),a[n.trailName]=n,n.addTo(e.mapDiv)})),t.$store.dispatch("setProjectSites",a)})))},selectSite:function(e){var t=this;t.$store.getters.getComparingSite&&(t.$store.getters.getComparingSite.setStyle(Y),t.$store.dispatch("setComparingSite","")),t.$store.getters.getSelectedSite&&t.$store.getters.getSelectedSite.setStyle(Y);var a=t.$store.getters.getProjectSites[e];a.setStyle(K),t.$store.dispatch("setSelectedSite",a),c.$emit("map-div:site-selected"),this.mapDiv.fitBounds(a.getBounds(),{maxZoom:11})},countDownChanged:function(e){this.dismissCountDown=e},showAlert:function(){this.dismissCountDown=this.dismissSecs}}},ee=Q,te=(a("1b00"),Object(p["a"])(ee,U,z,!1,null,"7edaca37",null)),ae=te.exports,re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-row",{attrs:{"no-gutters":""}},[a("b-col",{attrs:{sm:"6"}},[a("b-form-group",[a("b-radio-group",{attrs:{options:e.timePeriodOptions,stacked:""},on:{input:e.renderSelectedGraph},model:{value:e.timePeriod,callback:function(t){e.timePeriod=t},expression:"timePeriod"}})],1)],1),a("b-col",{attrs:{sm:"6"}},[a("b-form-group",[a("b-radio-group",{attrs:{options:e.dataSourceOptions,stacked:"",disabled:e.noEstimates},on:{input:e.renderSelectedGraph},model:{value:e.dataSource,callback:function(t){e.dataSource=t},expression:"dataSource"}})],1)],1)],1),a("b-row",{attrs:{"no-gutters":"",id:"chart-area"}})],1)},oe=[],se=a("2d5f"),ie=a.n(se),ne={1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},le={name:"BarGraph",data:function(){return{projectName:null,projectCode:null,siteid:null,trailName:null,selectedSite:null,monthlyEstimates:null,annualEstimates:null,comparingSite:null,comparingSiteMonthlyEstimates:null,comparingSiteAnnualEstimates:null,timePeriodOptions:[{text:"Annual",value:"annual"},{text:"Monthly",value:"monthly"}],dataSourceOptions:[{text:"Modelled",value:"modelled"},{text:"Social Media",value:"socialMedia"}],timePeriod:"",dataSource:"",noEstimates:!1}},methods:{renderDefaultGraph:function(){var e,t,a=this,r=a.$store.getters.getVizMode;if(r===F.COMPARE){var o=a.$store.getters.getComparingSite["siteid"];return a.comparingSite=a.$store.getters.getComparingSite,void v.a.all([v.a.get(a.$apiEndpoint+"/sites/"+o+"/annualEstimates"),v.a.get(a.$apiEndpoint+"/sites/"+o+"/monthlyEstimates")]).then(v.a.spread((function(e,t){a.comparingSiteAnnualEstimates=e.data,a.comparingSiteMonthlyEstimates=t.data,a.renderSelectedGraph()})))}a.clearBarGraph(),a.projectName=a.$store.getters.getSelectedProjectName,a.projectCode=a.$store.getters.getSelectedProjectCode,a.selectedSite=a.$store.getters.getSelectedSite,a.trailName=a.$store.getters.getSelectedSite["trailName"],a.siteid=a.$store.getters.getSelectedSite["siteid"],r===F.PROJECT?(e=a.$apiEndpoint+"/projects/"+a.projectCode+"/annualEstimates",t=a.$apiEndpoint+"/projects/"+a.projectCode+"/monthlyEstimates"):r===F.SITE&&(e=a.$apiEndpoint+"/sites/"+a.siteid+"/annualEstimates",t=a.$apiEndpoint+"/sites/"+a.siteid+"/monthlyEstimates"),v.a.all([v.a.get(e),v.a.get(t)]).then(v.a.spread((function(e,t){if(a.annualEstimates=e.data,a.monthlyEstimates=t.data,a.timePeriod||(a.timePeriod="monthly"),!a.dataSource){var r=a.$store.getters.getSelectedProjectDataSources;r.includes("estimate")?a.dataSource="modelled":(a.dataSource="socialMedia",a.noEstimates=!0)}a.renderSelectedGraph()})))},_addLabelToArray:function(e,t){return e.unshift(t),e},_renderBarGraph:function(e,t,a,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];ie.a.generate({bindto:"#chart-area",size:{height:480},axis:{x:{type:"category",categories:t,tick:{rotate:60,multiline:!1},height:40},y:{label:{text:r,position:"outer-middle"}}},legend:{show:o},data:{columns:e,type:"bar",colors:Object.assign({},a)}})},_getSocialMediaColors:function(e,t){var a={};return a[e+" - Flickr"]=t?W.COMPARE_FLICKR:W.FLICKR,a[e+" - Instagram"]=t?W.COMPARE_INSTA:W.INSTA,a[e+" - Twitter"]=t?W.COMPARE_TWITTER:W.TWITTER,a[e+" - WTA"]=t?W.COMPARE_WTA:W.WTA,a[e+" - AllTrails"]=t?W.COMPARE_ALLTRAILS:W.ALLTRAILS,a[e+" - eBird"]=t?W.COMPARE_EBIRD:W.EBIRD,a[e+" - Gravy Analytics"]=t?W.COMPARE_GRAVY:W.GRAVY,a[e+" - Reveal"]=t?W.COMPARE_REVEAL:W.REVEAL,a},_prepareMonthlyModelledData:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[e+" - Monthly Average Modelled"],o={};return t.forEach((function(e){r.push(Math.round(e.estimate))})),o[e+" - Monthly Average Modelled"]=a?W.COMPARE_MODELLED:W.MODELLED,[[r],o]},_prepareAnnualModelledData:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[e+" - Annual Modelled"],o={};return t.forEach((function(e){r.push(Math.round(e.estimate))})),o[e+" - Annual Modelled"]=a?W.COMPARE_MODELLED:W.MODELLED,[[r],o]},_prepareMonthlySocialMediaData:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._prepareSocialMediaData(e,t,a)},_prepareAnnualSocialMediaData:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._prepareSocialMediaData(e,t,a)},_prepareSocialMediaData:function(e,t,a){var r=this,o=[e+" - Flickr"],s=[e+" - Instagram"],i=[e+" - Twitter"],n=[e+" - WTA"],l=[e+" - AllTrails"],c=[e+" - eBird"],d=[e+" - Gravy Analytics"],u=[e+" - Reveal"];t.forEach((function(e){o.push(Math.round(e.flickr)),s.push(Math.round(e.instag)),i.push(Math.round(e.twitter)),n.push(Math.round(e.wta)),l.push(Math.round(e.alltrails)),c.push(Math.round(e.ebird)),d.push(Math.round(e.gravy)),u.push(Math.round(e.reveal))}));var m=r.$store.getters.getSelectedProjectDataSources,p=[];return m.includes("flickr")&&p.push(o),m.includes("instag")&&p.push(s),m.includes("twitter")&&p.push(i),m.includes("wta")&&p.push(n),m.includes("alltrails")&&p.push(l),m.includes("ebird")&&p.push(c),m.includes("gravy")&&p.push(d),m.includes("reveal")&&p.push(u),[p,r._getSocialMediaColors(e,a)]},renderMonthlyModelled:function(){var e=this,t=[];e.monthlyEstimates.forEach((function(e){t.push(ne[e.month])}));var a=e._prepareMonthlyModelledData(e.trailName,e.monthlyEstimates),r=Object(i["a"])(a,2),o=r[0],s=r[1];if(e.$store.getters.getVizMode===F.COMPARE){var n=e._prepareMonthlyModelledData(e.comparingSite["trailName"],e.comparingSiteMonthlyEstimates,!0),l=Object(i["a"])(n,2),c=l[0],d=l[1];o=o.concat(c),Object.keys(d).forEach((function(e){return s[e]=d[e]})),e._renderBarGraph(o,t,s,"Average Modeled Number of Visits",!0)}else e._renderBarGraph(o,t,s,"Average Modeled Number of Visits")},renderMonthlySocialMedia:function(){var e=this,t=[];e.monthlyEstimates.forEach((function(e){t.push(ne[e.month])}));var a=e._prepareMonthlySocialMediaData(e.trailName,e.monthlyEstimates),r=Object(i["a"])(a,2),o=r[0],s=r[1];if(e.$store.getters.getVizMode===F.COMPARE){var n=e._prepareMonthlySocialMediaData(e.comparingSite["trailName"],e.comparingSiteMonthlyEstimates,!0),l=Object(i["a"])(n,2),c=l[0],d=l[1];o=o.concat(c),Object.keys(d).forEach((function(e){return s[e]=d[e]}))}e._renderBarGraph(o,t,s,"Average Social Media User-Days",!0)},renderAnnualModelled:function(){var e=this,t=[];e.annualEstimates.forEach((function(e){t.push(e.year)}));var a=e._prepareAnnualModelledData(e.trailName,e.annualEstimates),r=Object(i["a"])(a,2),o=r[0],s=r[1];if(e.$store.getters.getVizMode===F.COMPARE){var n=e._prepareAnnualModelledData(e.comparingSite["trailName"],e.comparingSiteAnnualEstimates,!0),l=Object(i["a"])(n,2),c=l[0],d=l[1];o=o.concat(c),Object.keys(d).forEach((function(e){return s[e]=d[e]})),e._renderBarGraph(o,t,s,"Total Modeled Number of Visits",!0)}else e._renderBarGraph(o,t,s,"Total Modeled Number of Visits")},renderAnnualSocialMedia:function(){var e=this,t=[];e.annualEstimates.forEach((function(e){t.push(e.year)}));var a=e._prepareAnnualSocialMediaData(e.trailName,e.annualEstimates),r=Object(i["a"])(a,2),o=r[0],s=r[1];if(e.$store.getters.getVizMode===F.COMPARE){var n=e._prepareAnnualSocialMediaData(e.comparingSite["trailName"],e.comparingSiteAnnualEstimates,!0),l=Object(i["a"])(n,2),c=l[0],d=l[1];o=o.concat(c),Object.keys(d).forEach((function(e){return s[e]=d[e]}))}e._renderBarGraph(o,t,s,"Total Social Media User-Days",!0)},renderSelectedGraph:function(){"monthly"===this.timePeriod&&"modelled"===this.dataSource?this.renderMonthlyModelled():"monthly"===this.timePeriod&&"socialMedia"===this.dataSource?this.renderMonthlySocialMedia():"annual"===this.timePeriod&&"modelled"===this.dataSource?this.renderAnnualModelled():"annual"===this.timePeriod&&"socialMedia"===this.dataSource&&this.renderAnnualSocialMedia()},clearBarGraph:function(){this.projectName=null,this.projectCode=null,this.siteid=null,this.trailName=null,this.selectedSite=null,this.monthlyEstimates=null,this.annualEstimates=null}}},ce=le,de=(a("d0d2"),Object(p["a"])(ce,re,oe,!1,null,"327571b6",null)),ue=de.exports,me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-row",{attrs:{"no-gutters":""}},[a("b-col",{staticClass:"text-right"},[a("b-form-group",[a("b-radio-group",{attrs:{options:e.dateRangeOptions},on:{input:e.switchDateRange},model:{value:e.dataRange,callback:function(t){e.dataRange=t},expression:"dataRange"}})],1)],1)],1),a("div",{attrs:{id:"time-series"}}),e._m(0)],1)},pe=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-center disclaimer"},[a("p",[a("strong",[e._v('"Modeled"')]),e._v(" values here are in draft form and will change, sometimes dramatically, as our methods and data improve.\n      "),a("br"),a("strong",[e._v('"On-site"')]),e._v(" values are estimates from infrared counters and parking lot counts, where available.\n    ")])])}];a("c5f6");Number.prototype.pad=function(e){var t=String(this);while(t.length<(e||2))t="0"+t;return t};var he={name:"TimeSeries",data:function(){return{projectName:null,projectCode:null,siteid:null,trailName:null,selectedSite:null,monthlyVisitation:null,weeklyVisitation:null,comparingSite:null,comparingSiteMonthlyVisitation:null,comparingSiteWeeklyVisitation:null,dataRange:"",chart:null,domain:null,dateRangeOptions:[{text:"Monthly",value:"monthly"},{text:"Weekly",value:"weekly"}]}},methods:{_getNthSunday:function(e,t){var a,r=new Date(e,0);a=0===r.getDay()?r.getDate():r.getDate()+7-r.getDay();var o=7*(t-1)+a;return r.setDate(o),r.getDate()},_getColors:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a={};return a[e+" - Modelled"]=t?W.COMPARE_MODELLED:W.MODELLED,a[e+" - On Site"]=t?W.COMPARE_ON_SITE:W.ON_SITE,a[e+" - Flickr"]=t?W.COMPARE_FLICKR:W.FLICKR,a[e+" - Instagram"]=t?W.COMPARE_INSTA:W.INSTA,a[e+" - Twitter"]=t?W.COMPARE_TWITTER:W.TWITTER,a[e+" - WTA"]=t?W.COMPARE_WTA:W.WTA,a[e+" - AllTrails"]=t?W.COMPARE_ALLTRAILS:W.ALLTRAILS,a[e+" - eBird"]=t?W.COMPARE_EBIRD:W.EBIRD,a[e+" - Gravy Analytics"]=t?W.COMPARE_GRAVY:W.GRAVY,a[e+" - Reveal"]=t?W.COMPARE_REVEAL:W.REVEAL,a},_prepareMonthlyData:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this,o=["date"],s=[e+" - Modelled"],i=[e+" - On Site"],n=[e+" - Flickr"],l=[e+" - Instagram"],c=[e+" - Twitter"],d=[e+" - WTA"],u=[e+" - AllTrails"],m=[e+" - eBird"],p=[e+" - Gravy Analytics"],h=[e+" - Reveal"];t.forEach((function(e){o.push(e.year+"-"+e.month+"-1"),s.push(Math.round(e.estimate,2)),i.push(e.onsite),n.push(e.flickr),l.push(e.instag),c.push(e.twitter),d.push(e.wta),u.push(e.alltrails),m.push(e.ebird),p.push(e.gravy),h.push(e.reveal)}));var f=this.$store.getters.getSelectedProjectDataSources,g=r.$store.getters.getVizMode,v=[o];return f.includes("estimate")&&v.push(s),f.includes("onsite")&&g!==F.PROJECT&&v.push(i),f.includes("flickr")&&g!==F.COMPARE&&v.push(n),f.includes("twitter")&&g!==F.COMPARE&&v.push(c),f.includes("instag")&&g!==F.COMPARE&&v.push(l),f.includes("wta")&&g!==F.COMPARE&&v.push(d),f.includes("alltrails")&&g!==F.COMPARE&&v.push(u),f.includes("ebird")&&g!==F.COMPARE&&v.push(m),f.includes("gravy")&&g!==F.COMPARE&&v.push(p),f.includes("reveal")&&g!==F.COMPARE&&v.push(h),a&&v.splice(0,1),v},_prepareWeeklyData:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this,o=["date"],s=[e+" - Modelled"],i=[e+" - On Site"],n=[e+" - Flickr"],l=[e+" - Instagram"],c=[e+" - Twitter"],d=[e+" - WTA"],u=[e+" - AllTrails"],m=[e+" - eBird"],p=[e+" - Gravy Analytics"],h=[e+" - Reveal"];t.forEach((function(e){var t=r._getNthSunday(e.year,e.week);o.push(e.year+"-"+e.month+"-"+t),s.push(Math.round(e.estimate,2)),i.push(e.onsite),n.push(e.flickr),l.push(e.instag),c.push(e.twitter),d.push(e.wta),u.push(e.alltrails),m.push(e.ebird),p.push(e.gravy),h.push(e.reveal)}));var f=r.$store.getters.getSelectedProjectDataSources,g=r.$store.getters.getVizMode,v=[o];return f.includes("estimate")&&v.push(s),f.includes("onsite")&&g!==F.PROJECT&&v.push(i),f.includes("flickr")&&g!==F.COMPARE&&v.push(n),f.includes("twitter")&&g!==F.COMPARE&&v.push(c),f.includes("instag")&&g!==F.COMPARE&&v.push(l),f.includes("wta")&&g!==F.COMPARE&&v.push(d),f.includes("alltrails")&&g!==F.COMPARE&&v.push(u),f.includes("ebird")&&g!==F.COMPARE&&v.push(m),f.includes("gravy")&&g!==F.COMPARE&&v.push(p),f.includes("reveal")&&g!==F.COMPARE&&v.push(h),a&&v.splice(0,1),v},renderTimeSeries:function(){var e,t,a=this;if(a.$store.getters.getVizMode===F.COMPARE){var r=a.$store.getters.getComparingSite["siteid"];return a.comparingSite=a.$store.getters.getComparingSite,void v.a.all([v.a.get(this.$apiEndpoint+"/sites/"+r+"/monthlyVisitation"),v.a.get(this.$apiEndpoint+"/sites/"+r+"/weeklyVisitation")]).then(v.a.spread((function(e,t){a.comparingSiteMonthlyVisitation=e.data,a.comparingSiteWeeklyVisitation=t.data,a._renderTimeSeries()})))}a.clearTimeSeries(),this.projectName=a.$store.getters.getSelectedProjectName,this.projectCode=a.$store.getters.getSelectedProjectCode,this.selectedSite=a.$store.getters.getSelectedSite,this.trailName=a.$store.getters.getSelectedSite["trailName"],this.siteid=a.$store.getters.getSelectedSite["siteid"],a.$store.getters.getVizMode===F.PROJECT?(e=a.$apiEndpoint+"/projects/"+a.projectCode+"/monthlyVisitation",t=a.$apiEndpoint+"/projects/"+a.projectCode+"/weeklyVisitation"):a.$store.getters.getVizMode===F.SITE&&(e=a.$apiEndpoint+"/sites/"+a.siteid+"/monthlyVisitation",t=a.$apiEndpoint+"/sites/"+a.siteid+"/weeklyVisitation"),v.a.all([v.a.get(e),v.a.get(t)]).then(v.a.spread((function(e,t){a.monthlyVisitation=e.data,a.weeklyVisitation=t.data,a._renderTimeSeries()})))},_renderTimeSeries:function(){var e=this;e.timeseriesMonthlyData=e._prepareMonthlyData(this.trailName,this.monthlyVisitation),e.timeseriesWeeklyData=e._prepareWeeklyData(this.trailName,this.weeklyVisitation);var t,a=e._getColors(e.trailName);if(e.$store.getters.getVizMode===F.COMPARE){var r=e.timeseriesMonthlyData.concat(e._prepareMonthlyData(e.comparingSite["trailName"],e.comparingSiteMonthlyVisitation,!0)),o=e.timeseriesWeeklyData.concat(e._prepareWeeklyData(e.comparingSite["trailName"],e.comparingSiteWeeklyVisitation,!0));e.timeseriesMonthlyData=r,e.timeseriesWeeklyData=o;var s=e._getColors(e.$store.getters.getComparingSite["trailName"],!0);Object.keys(s).forEach((function(e){return a[e]=s[e]}))}"weekly"===e.dataRange?t=e.timeseriesWeeklyData:"monthly"===e.dataRange?t=e.timeseriesMonthlyData:(e.dataRange="monthly",t=e.timeseriesMonthlyData),e.chart=ie.a.generate({bindto:"#time-series",data:{x:"date",xFormat:"%Y-%m-%d",columns:t,colors:Object.assign({},a)},axis:{x:{type:"timeseries",tick:{format:function(t){var a=t.getFullYear()+"-"+(t.getMonth()+1).pad(2);return"monthly"===e.dataRange?a:"weekly"===e.dataRange?a+"-"+t.getDate().pad(2):void 0},rotate:60,fit:!1}},y:{label:{text:"User-Days",position:"outer-middle"}}},zoom:{enabled:!0,rescale:!0,onzoom:function(t){e.domain=t}}})},switchDateRange:function(){var e=this;"monthly"===e.dataRange?e.chart.load({columns:e.timeseriesMonthlyData}):"weekly"===e.dataRange&&e.chart.load({columns:e.timeseriesWeeklyData}),e.chart.zoom(e.domain)},clearTimeSeries:function(){this.projectName=null,this.projectCode=null,this.siteid=null,this.trailName=null,this.selectedSite=null,this.monthlyVisitation=null,this.weeklyVisitation=null,this.comparingSite=null,this.comparingSiteMonthlyVisitation=null,this.comparingSiteWeeklyVisitation=null,this.dataRange=""}}},fe=he,ge=(a("9ee5"),Object(p["a"])(fe,me,pe,!1,null,"281e995b",null)),ve=ge.exports,be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"chart",attrs:{id:"chart"}})},ye=[],Se=a("61cc"),_e=a.n(Se),Me={name:"HomeLocations",data:function(){return{projectName:null,projectCode:null,siteid:null,homeLocations:null,randomSeed:null}},methods:{_randomNumber:function(){var e=1e4*Math.sin(this.randomSeed+=1);return e-Math.floor(e)},_getRandomColor:function(){for(var e="0123456789ABCDEF",t="#",a=0;a<6;a++)t+=e[Math.floor(16*this._randomNumber())];return t},_checkLabelAndAppend:function(e,t,a){return e.includes(t)?t+" ("+a+")":t},_mergeTrees:function(e,t){var a=Object.assign({},e);a["visit_days"]+=t["visit_days"],a["visitors_unq"]+=t["visitors_unq"];var r=function(e,t){var a=!0,r=!1,o=void 0;try{for(var s,i=e[Symbol.iterator]();!(a=(s=i.next()).done);a=!0){var n=s.value;if(n["name"]===t)return n}}catch(l){r=!0,o=l}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return null},o=function(e,t){var a=!0,r=!1,o=void 0;try{for(var s,i=e[Symbol.iterator]();!(a=(s=i.next()).done);a=!0){var n=s.value;if(n["name"]===t)return n}}catch(l){r=!0,o=l}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return null},s=function(e,t){var a=!0,r=!1,o=void 0;try{for(var s,i=e[Symbol.iterator]();!(a=(s=i.next()).done);a=!0){var n=s.value;if(n["name"]===t)return n}}catch(l){r=!0,o=l}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return null},i=!0,n=!1,l=void 0;try{for(var c,d=t["countries"][Symbol.iterator]();!(i=(c=d.next()).done);i=!0){var u=c.value,m=r(a["countries"],u["name"]);null==m&&(m={name:u["name"],visit_days:0,visitors_unq:0},a["countries"].push(m)),m["visit_days"]+=u["visit_days"],m["visitors_unq"]+=u["visitors_unq"],"undefined"===typeof u["states"]&&(u["states"]=[]),"undefined"===typeof a["states"]&&(a["states"]=[]);var p=!0,h=!1,f=void 0;try{for(var g,v=u["states"][Symbol.iterator]();!(p=(g=v.next()).done);p=!0){var b=g.value,y=o(m["states"],b["name"]);null==y&&(y={name:b["name"],visit_days:0,visitors_unq:0},m["states"].push(y)),y["visit_days"]+=b["visit_days"],y["visitors_unq"]+=b["visitors_unq"],"undefined"===typeof b["counties"]&&(b["counties"]=[]),"undefined"===typeof y["counties"]&&(y["counties"]=[]);var S=!0,_=!1,M=void 0;try{for(var E,w=b["counties"][Symbol.iterator]();!(S=(E=w.next()).done);S=!0){var T=E.value,C=s(y["counties"],T["name"]);null==C&&(C={name:T["name"],visit_days:0,visitors_unq:0},y["counties"].push(C)),C["visit_days"]+=T["visit_days"],C["visitors_unq"]+=T["visitors_unq"]}}catch(j){_=!0,M=j}finally{try{S||null==w.return||w.return()}finally{if(_)throw M}}}}catch(j){h=!0,f=j}finally{try{p||null==v.return||v.return()}finally{if(h)throw f}}}}catch(j){n=!0,l=j}finally{try{i||null==d.return||d.return()}finally{if(n)throw l}}return a},renderTreeMap:function(){this.randomSeed=12;var e,t=this;t.clear(),t.projectName=t.$store.getters.getSelectedProjectName,t.projectCode=t.$store.getters.getSelectedProjectCode,t.siteid=t.$store.getters.getSelectedSite["siteid"],t.$store.getters.getVizMode===F.PROJECT?e=this.$apiEndpoint+"/projects/"+t.projectCode+"/homeLocations":t.$store.getters.getVizMode===F.SITE&&(e=t.$apiEndpoint+"/sites/"+t.siteid+"/homeLocations"),v.a.get(e).then((function(e){t.homeLocations=e.data,t._renderTreeMap()}))},_renderTreeMap:function(){var e=this,t=e.homeLocations,a=[],r=[],o=[],s=[],i="World ("+t["visit_days"]+" Visit Days)";a.push(i),o.push(t["visit_days"]),r.push(""),s.push(this._getRandomColor());var n=!0,l=!1,c=void 0;try{for(var d,u=t["countries"][Symbol.iterator]();!(n=(d=u.next()).done);n=!0){var m=d.value,p=m["name"];a.push(p),o.push(m["visit_days"]),r.push(i),s.push(this._getRandomColor());var h=!0,f=!1,g=void 0;try{for(var v,b=m["states"][Symbol.iterator]();!(h=(v=b.next()).done);h=!0){var y=v.value,S=this._checkLabelAndAppend(a,y["name"],m["name"]);a.push(S),o.push(y["visit_days"]),r.push(p),s.push(this._getRandomColor());var _=!0,M=!1,E=void 0;try{for(var w,T=y["counties"][Symbol.iterator]();!(_=(w=T.next()).done);_=!0){var C=w.value,j=this._checkLabelAndAppend(a,C["name"],y["name"]);a.push(j),o.push(C["visit_days"]),r.push(S),s.push(this._getRandomColor())}}catch(A){M=!0,E=A}finally{try{_||null==T.return||T.return()}finally{if(M)throw E}}}}catch(A){f=!0,g=A}finally{try{h||null==b.return||b.return()}finally{if(f)throw g}}}}catch(A){l=!0,c=A}finally{try{n||null==u.return||u.return()}finally{if(l)throw c}}var P=Math.max(document.documentElement.clientHeight,window.innerHeight||0),$=Math.max(document.documentElement.clientWidth,window.innerWidth||0),I={autosize:!1,height:Math.floor(.72*P),width:Math.floor(.48*$),margin:{l:10,r:0,b:0,t:0,pad:0}};_e.a.newPlot("chart",[{type:"treemap",labels:a,parents:r,values:o,textinfo:"label+percent root",pathbar:{visible:!0},branchvalues:"total",marker:{line:{width:.5}},tiling:{packing:"squarify"}}],I)},clear:function(){this.homeLocations=""}}},Ee=Me,we=(a("6c33"),Object(p["a"])(Ee,be,ye,!1,null,"16765190",null)),Te=we.exports,Ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"mapHomeLocations",attrs:{id:"mapHomeLocations"}})},je=[],Pe={name:"HomeLocationsMap",data:function(){return{mapDiv:"",homeLocationsGeoJson:"",visibleLayer:"",projectCode:"",siteid:"",clickedState:"",clickedCounty:"",level:"state",activated:!1}},methods:{_mountMap:function(){var e=this,t=G.a.map(this.$refs["mapHomeLocations"],{center:[40.53,-99.1],zoom:5});G.a.tileLayer(H.TILES_API,{attribution:H.ATTRIBUTION,maxZoom:18,id:"mapbox/light-v10",accessToken:H.TOKEN}).addTo(t);var a=G.a.control({position:"bottomright"});a.onAdd=function(){var t=G.a.DomUtil.create("div","info legend"),a=[1,5,10,20,50,75,100];t.innerHTML+="<div>Visit Days</div>";for(var r=0;r<a.length;r++)t.innerHTML+='<i style="background:'+e._getColors(a[r]+1)+'"></i> '+a[r]+(a[r+1]?"&ndash;"+a[r+1]+"<br>":"+");return t},a.addTo(t);var r=G.a.control({position:"topright"});r.onAdd=function(){var e=G.a.DomUtil.create("div");return e.innerHTML+="<a href='javascript:void(0);' id='backToState' class='hl-switch-options hl-hidden'>Back to State Level</a><a href='javascript:void(0);' id='backToCounty' class='hl-switch-options hl-hidden'>Back to County Level</a>",e},r.addTo(t),e.mapDiv=t,document.getElementById("backToState").addEventListener("click",(function(){return e.renderHomeLocationsMap()})),document.getElementById("backToCounty").addEventListener("click",(function(){return e._renderCountyLevel(e.clickedState)}))},_getColors:function(e){return e>100?"#800026":e>75?"#BD0026":e>50?"#E31A1C":e>20?"#FC4E2A":e>10?"#FD8D3C":e>5?"#FEB24C":e>0?"#FED976":"#FFEDA0"},renderHomeLocationsMap:function(){var e,t=this;t.level="state",t.$store.getters.getVizMode===F.PROJECT?(t.projectCode=t.$store.getters.getSelectedProjectCode,e=t.$apiEndpoint+"/projects/"+t.projectCode+"/homeLocationsState"):t.$store.getters.getVizMode===F.SITE&&(t.siteid=t.$store.getters.getSelectedSite["siteid"],e=t.$apiEndpoint+"/sites/"+t.siteid+"/homeLocationsState"),v.a.get(e).then((function(e){t.homeLocationsGeoJson=e.data,t.activated?t._addLayersToMap():t.mapDiv||t._mountMap()}))},_renderCountyLevel:function(e){var t,a=this;a.level="county",a.$store.getters.getVizMode===F.PROJECT?t=a.$apiEndpoint+"/projects/"+a.projectCode+"/homeLocationsCounty/"+e:a.$store.getters.getVizMode===F.SITE&&(t=a.$apiEndpoint+"/sites/"+a.siteid+"/homeLocationsCounty/"+e),v.a.get(t).then((function(e){a.homeLocationsGeoJson=e.data,a._addLayersToMap()}))},_renderCensusTractLevel:function(e,t){var a,r=this;r.level="censusTract",r.$store.getters.getVizMode===F.PROJECT?a=r.$apiEndpoint+"/projects/"+r.projectCode+"/homeLocationsCensusTract/"+e+"/"+t:r.$store.getters.getVizMode===F.SITE&&(a=r.$apiEndpoint+"/sites/"+r.siteid+"/homeLocationsCensusTract/"+e+"/"+t),v.a.get(a).then((function(e){r.homeLocationsGeoJson=e.data,r._addLayersToMap()}))},_addLayersToMap:function(){var e=this;function t(t){return{fillColor:e._getColors(t.properties.visit_days),weight:.5,opacity:1,color:"white",dashArray:"3",fillOpacity:.7}}function a(e){var t=e.feature.properties,a='<table class="home-location-tooltip">';return t.state&&(a+="<tr><td> State </td><td>"+t.state+"</td></tr>"),t.county&&(a+="<tr><td> County</td><td>"+t.county+"</td></tr>"),a+="<tr><td> Visit Days</td><td>"+t.visit_days+"</td></tr><tr><td> Unique Visitors</td><td>"+t.visitors_unq+"</td></tr>",t.population&&(a+="<tr><td> Total Population</td><td>"+t.population+"</td></tr>"),t.median_income&&(a+="<tr><td> Median Income</td><td>"+t.median_income+"</td></tr>"),t.minority_percentage&&(a+="<tr><td> Percent Minority</td><td>"+t.minority_percentage+"</td></tr>"),t.svi&&(a+="<tr><td> Social Vulnerability Index</td><td>"+parseFloat(Math.round(100*t.svi)/100).toFixed(2)+"</td></tr>"),a+="</table>",a}"state"===e.level?(document.getElementById("backToState").classList.add("hl-hidden"),document.getElementById("backToCounty").classList.add("hl-hidden")):"county"===e.level?(document.getElementById("backToState").classList.remove("hl-hidden"),document.getElementById("backToCounty").classList.add("hl-hidden")):"censusTract"===e.level&&(document.getElementById("backToState").classList.add("hl-hidden"),document.getElementById("backToCounty").classList.remove("hl-hidden")),e.visibleLayer&&e.mapDiv.removeLayer(e.visibleLayer),e.visibleLayer=G.a.geoJSON(e.homeLocationsGeoJson,{style:t}).bindTooltip((function(e){return a(e)})).on("click",(function(t){var a=t.layer.feature.properties,r=a["state_code"];if("state"===e.level)e._renderCountyLevel(r),e.clickedState=r;else if("county"===e.level){var o=["35","53"];if(!o.includes(r))return;var s=a["county_code"];e._renderCensusTractLevel(r,s),e.clickedState=r,e.clickedCounty=s}})),e.visibleLayer.addTo(e.mapDiv);var r=["02","15"],o=e.homeLocationsGeoJson.features.filter((function(e){return!r.includes(e["properties"]["state_code"])}));o={type:"FeatureCollection",features:o};var s=G.a.geoJSON(o);e.mapDiv.fitBounds(s.getBounds())},activateHomeLocationsMap:function(){var e=this;e.activated||(e.activated=!0,setTimeout((function(){e.mapDiv.invalidateSize(),e._addLayersToMap()}),100))}}},$e=Pe,Ie=(a("0dca"),Object(p["a"])($e,Ce,je,!1,null,"6b9ccb7c",null)),Ae=Ie.exports,De=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",{domProps:{innerHTML:e._s(e.compiledMarkdown)}})},Oe=[],Le=a("0e54"),Re={name:"InfoViewer",data:function(){return{info:void 0,compiledMarkdown:void 0}},methods:{renderInfo:function(e){var t,a=this,r=this,o=r.$store.getters.getSelectedProjectCode;"project"===e?t=r.$apiEndpoint+"/projects/"+o+"/readme?type=INFO":"visitation"===e?t=r.$apiEndpoint+"/projects/"+o+"/readme?type=VISITS":"homeLocations"===e&&(t=r.$apiEndpoint+"/readme?type=HOMELOCATIONS_INFO"),v.a.get(t).then((function(e){r.info=e.data,a.compiledMarkdown=Le(a.info)}))}}},xe=Re,ke=(a("bb9c"),Object(p["a"])(xe,De,Oe,!1,null,"0ee492ee",null)),Ne=ke.exports,Ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-row",{attrs:{"no-gutters":""}},[a("b-col",{attrs:{sm:"6"}},[a("b-list-group",[a("b-list-group-item",{staticClass:"list-group-item"},[e._v("Total Visit Days "),a("span",[e._v(e._s(e.totalVisitDays))])]),a("b-list-group-item",{staticClass:"list-group-item"},[e._v("Weighted Median Income "),a("span",[e._v("$"+e._s(e.weightedMedianIncome))])])],1)],1),a("b-col",{attrs:{sm:"6"}},[a("b-list-group",[a("b-list-group-item",{staticClass:"list-group-item"},[e._v("Weighted Minority Percentage "),a("span",[e._v(e._s(e.weightedMinorityPercentage))])]),a("b-list-group-item",{staticClass:"list-group-item"},[e._v("Weighted Social Vulnerability Index "),a("span",[e._v(e._s(e.weightedSVI))])])],1)],1)],1),a("b-row",{attrs:{"no-gutters":""}},[a("b-col",{attrs:{sm:"12"}},[a("div",{attrs:{id:"income-chart"}})]),a("b-col",{attrs:{sm:"12"}},[a("div",{attrs:{id:"svi-chart"}})])],1)],1)},Ue=[],ze=(a("8615"),{name:"DemographicsSummary",data:function(){return{projectName:null,projectCode:null,siteid:null,demographicData:null,totalPopulation:null,totalVisitDays:null,weightedMedianIncome:null,weightedMinorityPercentage:null,weightedSVI:null}},methods:{_nanToZero:function(e){return null==e||isNaN(parseFloat(e))||e<0?0:e},_nDecimalPlaces:function(e,t){if(null==e||isNaN(parseFloat(e)))return 0;var a=Math.pow(10,t);return parseFloat(Math.round(e*a)/a).toFixed(t)},renderDemographicsSummary:function(){var e,t=this,a=this,r=a.$store.getters.getVizMode;a.projectName=a.$store.getters.getSelectedProjectName,a.projectCode=a.$store.getters.getSelectedProjectCode,a.siteid=a.$store.getters.getSelectedSite["siteid"],r===F.PROJECT?e=a.$apiEndpoint+"/projects/"+a.projectCode+"/homeLocationsDemographics":r===F.SITE&&(e=a.$apiEndpoint+"/sites/"+a.siteid+"/homeLocationsDemographics"),v.a.get(e).then((function(e){a.demographicData=e.data;var r=a.demographicData.filter((function(e){return t._nanToZero(e["median_income"])>0})),o=a.demographicData.filter((function(e){return t._nanToZero(e["svi"])>0}));a._calculateValues(),a._makeCharts(r,o)}))},_makeCharts:function(e,t){var a={"> 0":0,"> 20000":0,"> 40000":0,"> 60000":0,"> 80000":0,"> 100000":0},r=!0,o=!1,s=void 0;try{for(var i,n=e[Symbol.iterator]();!(r=(i=n.next()).done);r=!0){var l=i.value;l["median_income"]>1e5?a["> 100000"]+=l["visit_days"]:l["median_income"]>8e4?a["> 80000"]+=l["visit_days"]:l["median_income"]>6e4?a["> 60000"]+=l["visit_days"]:l["median_income"]>4e4?a["> 40000"]+=l["visit_days"]:l["median_income"]>2e4?a["> 20000"]+=l["visit_days"]:a["> 0"]+=l["visit_days"]}}catch(g){o=!0,s=g}finally{try{r||null==n.return||n.return()}finally{if(o)throw s}}var c={"> 0":0,"> 0.2":0,"> 0.4":0,"> 0.6":0,"> 0.8":0},d=!0,u=!1,m=void 0;try{for(var p,h=t[Symbol.iterator]();!(d=(p=h.next()).done);d=!0){var f=p.value;f["svi"]>.8?c["> 0.8"]+=f["visit_days"]:f["svi"]>.6?c["> 0.6"]+=f["visit_days"]:f["svi"]>.4?c["> 0.4"]+=f["visit_days"]:f["svi"]>.2?c["> 0.2"]+=f["visit_days"]:c["> 0"]+=f["visit_days"]}}catch(g){u=!0,m=g}finally{try{d||null==h.return||h.return()}finally{if(u)throw m}}this._makeBarChart(a,"#income-chart","Income"),this._makeBarChart(c,"#svi-chart","Social Vulnerability Index")},_calculateValues:function(){var e=this,t=0,a=0,r=0,o=0,s=0,i=!0,n=!1,l=void 0;try{for(var c,d=e.demographicData[Symbol.iterator]();!(i=(c=d.next()).done);i=!0){var u=c.value,m=e._nanToZero(u["visit_days"]);t+=e._nanToZero(u["population"]),a+=e._nanToZero(u["median_income"])*m,r+=e._nanToZero(u["minority_percentage"])*m,o+=e._nanToZero(u["svi"])*m,s+=m}}catch(p){n=!0,l=p}finally{try{i||null==d.return||d.return()}finally{if(n)throw l}}0===s&&(s=1),e.totalPopulation=t,e.totalVisitDays=s,e.weightedMedianIncome=e._nDecimalPlaces(a/s,0),e.weightedMinorityPercentage=e._nDecimalPlaces(r/s,2),e.weightedSVI=e._nDecimalPlaces(o/s,3)},_makeBarChart:function(e,t,a){var r=Object.keys(e),o=Object.values(e);o.unshift("Visit Days"),ie.a.generate({bindto:t,size:{height:200},axis:{x:{type:"category",categories:r,label:{text:a,position:"outer-center"},tick:{multiline:!1},height:40},y:{label:{text:"Visit Days",position:"outer-middle"}}},legend:{show:!1},data:{columns:[o],type:"bar"}})}}}),Be=ze,Ge=(a("0138"),Object(p["a"])(Be,Ve,Ue,!1,null,"129610c4",null)),We=Ge.exports,He={name:"Dashboard",data:function(){return{breadcrumbItems:[],trailName:"",comparingTrailName:"",visibleTabGroup:"project-info"}},mounted:function(){var e=this,t=this;void 0===t.$store.getters.getAllProjects?v.a.get(t.$apiEndpoint+"/projects").then((function(a){for(var r=a.data,o={},s=0,n=Object.entries(r);s<n.length;s++){var l=Object(i["a"])(n[s],2),c=l[0],d=l[1];o[d]=c}t.$store.dispatch("setAllProjects",r),t.$store.dispatch("setProjectCodeToName",o),e.renderProjectLevelPlots()})):this.renderProjectLevelPlots(),c.$on("map-div:site-selected",t.renderSiteLevelPlots),c.$on("map-div:compare-activated",t.renderComparisionPlots)},beforeDestroy:function(){var e=this;c.$off("map-div:site-selected",e.renderSiteLevelPlots),c.$off("map-div:compare-activated",e.renderComparisionPlots)},components:{InfoViewer:Ne,DemographicsSummary:We,HomeLocationsMap:Ae,HomeLocations:Te,TimeSeries:ve,BarGraph:ue,MapDiv:ae},methods:{renderProjectLevelPlots:function(){this.$store.dispatch("setVizMode",F.PROJECT);var e=this.$route.params.project,t=this.$store.getters.getProjectCodeToName[e];this.$store.dispatch("setSelectedProjectCode",e),this.$store.dispatch("setSelectedProjectName",t),this.breadcrumbItems.push({text:t,href:"/dashboard/"+e}),this.trailName="All Sites in "+t,this.$store.dispatch("setSelectedSite",{trailName:t,setStyle:function(e){return e}});var a=this;v.a.get(a.$apiEndpoint+"/projects/"+e+"/dataSources").then((function(e){a.$store.dispatch("setSelectedProjectDataSources",e.data),a.$refs["map-div"].renderProjectSites(),a.$refs["bar-graph"].renderDefaultGraph(),a.$refs["time-series"].renderTimeSeries(),a.$refs["home-locations"].renderTreeMap(),a.$refs["home-locations-map"].renderHomeLocationsMap(),a.$refs["project-info"].renderInfo("project"),a.$refs["visitation-info"].renderInfo("visitation"),a.$refs["home-locations-info"].renderInfo("homeLocations"),a.$refs["demographics-summary"].renderDemographicsSummary()}))},renderSiteLevelPlots:function(){this.trailName=this.$store.getters.getSelectedSite["trailName"],this.comparingTrailName="",this.breadcrumbItems.length>1&&this.breadcrumbItems.pop(),this.breadcrumbItems.push({text:this.trailName,href:"javascript:void()"}),this.$store.dispatch("setVizMode",F.SITE),this.$refs["bar-graph"].renderDefaultGraph(),this.$refs["time-series"].renderTimeSeries(),this.$refs["home-locations"].renderTreeMap(),this.$refs["home-locations-map"].renderHomeLocationsMap(),this.$refs["demographics-summary"].renderDemographicsSummary()},renderComparisionPlots:function(){this.$store.dispatch("setVizMode",F.COMPARE),this.comparingTrailName=this.$store.getters.getComparingSite["trailName"],this.visibleTabGroup="visitation",this.breadcrumbItems.length>1&&this.breadcrumbItems.pop(),this.breadcrumbItems.push({text:this.trailName+" vs "+this.comparingTrailName,href:"javascript:void()"}),this.$refs["bar-graph"].renderDefaultGraph(),this.$refs["time-series"].renderTimeSeries()},showSelectedTab:function(e){this.visibleTabGroup=e},activateHomeLocationsMap:function(e){e&&this.$refs["home-locations-map"].activateHomeLocationsMap()}}},Fe=He,Je=(a("b0b8"),Object(p["a"])(Fe,N,V,!1,null,"1bf01cca",null)),qe=Je.exports,Ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-row",{staticClass:"login-div",attrs:{"no-gutters":""}},[a("b-col",{attrs:{"offset-xl":"3",xl:"6","offset-lg":"3",lg:"6","offset-md":"2",md:"8",sm:"12"}},[a("b-card",{staticClass:"login-card",attrs:{header:"Login to Social Trails"}},[a("b-card-body",[a("b-form",{on:{submit:e.login,reset:e.clear}},[a("b-form-group",{attrs:{"label-for":"userName"}},[a("b-form-input",{attrs:{id:"userName",placeholder:"User Name",autocomplete:"off",required:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),a("b-form-group",{attrs:{"label-for":"password"}},[a("b-form-input",{attrs:{id:"password",placeholder:"Password",type:"password",autocomplete:"off",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),a("p",{staticClass:"text-danger"},[e._v("\n            "+e._s(e.errorMessage)+"\n          ")]),a("b-button",{staticClass:"pb-2 form-button",attrs:{type:"submit",variant:"info"}},[e._v("Login")]),a("b-button",{staticClass:"pb-2 form-button",attrs:{type:"reset",variant:"danger"}},[e._v("Reset")])],1)],1)],1)],1)],1)},Ze=[],Ke={name:"Login",data:function(){return{prevRoute:null,username:"",password:"",errorMessage:""}},beforeRouteEnter:function(e,t,a){a((function(e){e.prevRoute=t}))},methods:{login:function(e){var t=this;e.preventDefault(),t.errorMessage="",v.a.post(t.$apiEndpoint+"/users/authenticate",{username:t.username,password:t.password}).then((function(e){if(200===e.status){var a=e.data,r=a["token"],o=a["role"];t.$store.dispatch("setLoggedInUser",a["username"]),t.$store.dispatch("setAuthHeader",r),t.$store.dispatch("setUserRole",o),v.a.defaults.headers.common["Authorization"]=t.$store.getters.getAuthHeader,d.set("username",t.username,1),d.set("authHeader",r,1),d.set("userRole",o,1),t.$router.push(t.prevRoute?t.prevRoute:"/")}})).catch((function(e){if(401!==e.response.status)throw e;t.errorMessage=e.response.data["error"]}))},clear:function(e){e.preventDefault(),this.username="",this.password=""}}},Xe=Ke,Qe=(a("4f6a"),Object(p["a"])(Xe,Ye,Ze,!1,null,"34996165",null)),et=Qe.exports,tt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-row",{staticClass:"profile-div",attrs:{"no-gutters":""}},[a("b-col",{attrs:{"offset-xl":"3",xl:"6","offset-lg":"3",lg:"6","offset-md":"2",md:"8",sm:"12"}},[a("b-card",{staticClass:"profile-card",attrs:{header:"Profile"}},[a("b-card-body",[a("b-form",{on:{submit:e.updateUserInfo}},[a("p",{staticClass:"text-success"},[e._v("\n              "+e._s(e.successMessage)+"\n            ")]),a("b-form-group",{attrs:{label:"User Name","label-for":"username","label-cols-sm":"4","label-cols-lg":"3"}},[a("b-form-input",{attrs:{id:"username",autocomplete:"off",disabled:""},model:{value:e.userInfo.username,callback:function(t){e.$set(e.userInfo,"username",t)},expression:"userInfo.username"}})],1),a("b-form-group",{attrs:{label:"Name","label-for":"name","label-cols-sm":"4","label-cols-lg":"3"}},[a("b-form-input",{attrs:{id:"name",autocomplete:"off",required:""},model:{value:e.userInfo.name,callback:function(t){e.$set(e.userInfo,"name",t)},expression:"userInfo.name"}})],1),a("b-form-group",{attrs:{label:"Email","label-for":"email","label-cols-sm":"4","label-cols-lg":"3"}},[a("b-form-input",{attrs:{id:"email",autocomplete:"off",required:""},model:{value:e.userInfo.email,callback:function(t){e.$set(e.userInfo,"email",t)},expression:"userInfo.email"}})],1),a("b-form-group",{attrs:{label:"Role","label-for":"role","label-cols-sm":"4","label-cols-lg":"3"}},[a("b-form-input",{attrs:{id:"role",autocomplete:"off",required:"",disabled:""},model:{value:e.userInfo.role,callback:function(t){e.$set(e.userInfo,"role",t)},expression:"userInfo.role"}})],1),a("b-form-group",{attrs:{label:"Password","label-for":"password","label-cols-sm":"4","label-cols-lg":"3"}},[a("b-form-input",{attrs:{id:"password",type:"password",placeholder:"Enter new password to update, leave blank to keep existing password",autocomplete:"off"},on:{keyup:e.matchPassword},model:{value:e.userInfo.password,callback:function(t){e.$set(e.userInfo,"password",t)},expression:"userInfo.password"}})],1),a("b-form-group",{attrs:{label:"Confirm Password","label-for":"confirmPassword","label-cols-sm":"4","label-cols-lg":"3"}},[a("b-form-input",{attrs:{id:"confirmPassword",type:"password",placeholder:"Confirm new password to update, leave blank to keep existing password",autocomplete:"off"},on:{keyup:e.matchPassword},model:{value:e.confirmPassword,callback:function(t){e.confirmPassword=t},expression:"confirmPassword"}})],1),a("p",{staticClass:"text-danger"},[e._v("\n              "+e._s(e.errorMessage)+"\n            ")]),a("b-button",{staticClass:"pb-2 form-button",attrs:{type:"submit",variant:"info"}},[e._v("Save")])],1)],1)],1)],1)],1)],1)},at=[],rt={name:"UserProfile",data:function(){return{username:"",userInfo:{},confirmPassword:"",errorMessage:"",successMessage:""}},mounted:function(){var e=this;e.username=e.$route.params.username,v.a.get(e.$apiEndpoint+"/users/"+e.username).then((function(t){e.userInfo=t.data}))},methods:{updateUserInfo:function(e){var t=this;e.preventDefault(),t.userInfo.password===t.confirmPassword?v.a.put(t.$apiEndpoint+"/users/"+t.username,t.userInfo).then((function(e){t.userInfo=e.data,t.confirmPassword="",t.successMessage="Details Successfully Updated!"})):t.errorMessage="Password and confirm password do not match!"},matchPassword:function(){var e=this;e.userInfo.password!==e.confirmPassword?e.errorMessage="Password and confirm password do not match!":e.errorMessage=""}}},ot=rt,st=(a("a054"),Object(p["a"])(ot,tt,at,!1,null,"a4ccce96",null)),it=st.exports,nt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-row",{attrs:{"no-gutters":""}},[a("b-col",{attrs:{"offset-xl":"1",xl:"5","offset-lg":"1",lg:"5",md:"6",sm:"12"}},[a("b-card-body",[a("b-list-group",[a("b-list-group-item",{attrs:{button:"",variant:"info"},on:{click:e.showAddUserView}},[a("b-icon",{attrs:{icon:"person-plus"}}),e._v("\n                add new\n          ")],1),e._l(e.allUsers,(function(t){return a("b-list-group-item",{key:t,attrs:{button:""},on:{click:e.showEditUserView}},[e._v("\n            "+e._s(t)+"\n            "),a("b-icon",{staticClass:"icons-right",attrs:{icon:"pencil-square"}})],1)}))],2),a("p",{staticClass:"text-success user-form"},[e._v("\n          "+e._s(e.successMessage)+"\n        ")])],1)],1),a("b-col",{attrs:{xl:"5",lg:"5",md:"6",sm:"12"}},[a("b-card-body",[a("b-list-group",[a("b-list-group-item",{directives:[{name:"show",rawName:"v-show",value:"add"===e.mode,expression:"mode === 'add'"}],attrs:{button:"",variant:"info"}},[e._v("\n            Adding New User\n          ")]),a("b-list-group-item",{directives:[{name:"show",rawName:"v-show",value:"edit"===e.mode,expression:"mode === 'edit'"}],attrs:{button:"",variant:"info"}},[e._v("\n            Editing  "+e._s(e.currentUser)+"\n          ")])],1),a("b-form",{directives:[{name:"show",rawName:"v-show",value:"view"!==e.mode,expression:"mode !== 'view'"}],staticClass:"user-form",on:{submit:e.addUpdateUser}},[a("b-form-group",{attrs:{label:"User Name","label-for":"username","label-cols-sm":"4","label-cols-lg":"3"}},[a("b-form-input",{attrs:{id:"username",autocomplete:"off",required:"",placeholder:"allowed chars: a-z . - _",disabled:"edit"===e.mode},model:{value:e.userInfo.username,callback:function(t){e.$set(e.userInfo,"username",t)},expression:"userInfo.username"}})],1),a("b-form-group",{attrs:{label:"Name","label-for":"name","label-cols-sm":"4","label-cols-lg":"3"}},[a("b-form-input",{attrs:{id:"name",autocomplete:"off",required:""},model:{value:e.userInfo.name,callback:function(t){e.$set(e.userInfo,"name",t)},expression:"userInfo.name"}})],1),a("b-form-group",{attrs:{label:"Email","label-for":"email","label-cols-sm":"4","label-cols-lg":"3"}},[a("b-form-input",{attrs:{id:"email",autocomplete:"off",required:""},model:{value:e.userInfo.email,callback:function(t){e.$set(e.userInfo,"email",t)},expression:"userInfo.email"}})],1),a("b-form-group",{attrs:{label:"Role","label-for":"role","label-cols-sm":"4","label-cols-lg":"3"}},[a("b-form-select",{attrs:{id:"role","value-field":"item","text-field":"name",options:e.validRoles,required:""},model:{value:e.userInfo.role,callback:function(t){e.$set(e.userInfo,"role",t)},expression:"userInfo.role"}})],1),a("b-form-group",{attrs:{label:"Password","label-for":"password","label-cols-sm":"4","label-cols-lg":"3"}},[a("b-form-input",{attrs:{id:"password",type:"password",placeholder:"Enter new password to update, leave blank to keep existing password",autocomplete:"off"},model:{value:e.userInfo.password,callback:function(t){e.$set(e.userInfo,"password",t)},expression:"userInfo.password"}})],1),a("p",{staticClass:"text-danger"},[e._v("\n            "+e._s(e.errorMessage)+"\n          ")]),a("b-button",{staticClass:"pb-2 form-button action-buttons",attrs:{type:"submit",variant:"info"}},[e._v("Save")]),a("b-button",{directives:[{name:"show",rawName:"v-show",value:"edit"===e.mode,expression:"mode === 'edit'"}],staticClass:"pb-2 form-button action-buttons",attrs:{type:"button",variant:"danger"},on:{click:e.deleteUser}},[e._v("Delete")])],1)],1)],1),a("b-col",{attrs:{xl:"5",lg:"5",md:"6",sm:"12"}},[a("b-card-body")],1)],1)],1)},lt=[],ct={VIEW:"view",ADD:"add",EDIT:"edit"},dt={name:"Administration",data:function(){return{mode:ct.VIEW,allUsers:[],currentUser:"",userInfo:{},successMessage:"",errorMessage:"",validRoles:[{item:"admin",name:"Admin"},{item:"manager",name:"Manager"}]}},mounted:function(){var e=this;v.a.get(e.$apiEndpoint+"/users/listAll").then((function(t){e.allUsers=t.data}))},methods:{showAddUserView:function(){this.mode=ct.ADD},showEditUserView:function(e){var t=this,a=e.target.innerText;v.a.get(t.$apiEndpoint+"/users/"+a).then((function(e){t.userInfo=e.data,t.currentUser=a})),this.mode=ct.EDIT},addUpdateUser:function(e){this.mode===ct.ADD?this.addUser(e):this.mode===ct.EDIT&&this.updateUser(e)},addUser:function(e){var t=this;e.preventDefault();var a=t.userInfo.username;if(t.allUsers.includes(a))return t.errorMessage="username: "+a+" already taken",void setTimeout((function(){return t.errorMessage=""}),5e3);v.a.post(t.$apiEndpoint+"/users/"+a,t.userInfo).then((function(e){a=e.data.username,t.successMessage="User Successfully Added!",t.allUsers.push(a),setTimeout((function(){return t.successMessage=""}),5e3),t.mode=ct.VIEW,t.userInfo={}}))},updateUser:function(e){var t=this;e.preventDefault();var a=t.currentUser;v.a.put(t.$apiEndpoint+"/users/"+a,t.userInfo).then((function(e){a=e.data.username,t.successMessage="User Successfully Updated",setTimeout((function(){return t.successMessage=""}),5e3),t.mode=ct.VIEW,t.userInfo={}}))},deleteUser:function(){var e=this;v.a.delete(e.$apiEndpoint+"/users/"+e.currentUser,e.userInfo).then((function(t){e.successMessage=t.data.msg,e.allUsers=e.allUsers.filter((function(t){return t!==e.currentUser})),setTimeout((function(){return e.successMessage=""}),5e3),e.currentUser="",e.mode=ct.VIEW,e.userInfo={}}))}}},ut=dt,mt=(a("a704"),Object(p["a"])(ut,nt,lt,!1,null,"7e873e94",null)),pt=mt.exports;r["default"].use(A["a"]);var ht=[{path:"/",component:k},{path:"/login",component:et},{path:"/administration",component:pt},{path:"/user/:username",name:"user",component:it},{path:"/dashboard/:project",name:"dashboard",component:qe}],ft=new A["a"]({routes:ht,mode:"history"}),gt=ft;a("f9e3"),a("2dd8");r["default"].config.productionTip=!1,r["default"].prototype.$apiEndpoint="/api",r["default"].use(M["a"]),r["default"].use(E["a"]);var vt=d.get("username");void 0!==vt&&(I.dispatch("setLoggedInUser",vt),I.dispatch("setAuthHeader",d.get("authHeader")),I.dispatch("setUserRole",d.get("userRole")),v.a.defaults.headers.common["Authorization"]=I.getters.getAuthHeader),new r["default"]({router:gt,store:I,render:function(e){return e(_)}}).$mount("#app")},5762:function(e,t,a){},"6c33":function(e,t,a){"use strict";var r=a("6e31"),o=a.n(r);o.a},"6e31":function(e,t,a){},7756:function(e,t,a){},"7c74":function(e,t,a){},8273:function(e,t,a){},"8ed2":function(e,t,a){},9012:function(e,t,a){"use strict";var r=a("8ed2"),o=a.n(r);o.a},"92df":function(e,t,a){"use strict";var r=a("7c74"),o=a.n(r);o.a},"9ee5":function(e,t,a){"use strict";var r=a("5762"),o=a.n(r);o.a},a054:function(e,t,a){"use strict";var r=a("e86f"),o=a.n(r);o.a},a615:function(e,t,a){"use strict";var r=a("38d3"),o=a.n(r);o.a},a704:function(e,t,a){"use strict";var r=a("7756"),o=a.n(r);o.a},b0b8:function(e,t,a){"use strict";var r=a("0f85"),o=a.n(r);o.a},b601:function(e,t,a){},bb9c:function(e,t,a){"use strict";var r=a("b601"),o=a.n(r);o.a},d0d2:function(e,t,a){"use strict";var r=a("dd78"),o=a.n(r);o.a},dd78:function(e,t,a){},e86f:function(e,t,a){},ebee:function(e,t,a){},f8ba:function(e,t,a){}});
//# sourceMappingURL=app.5c9042d6.js.map